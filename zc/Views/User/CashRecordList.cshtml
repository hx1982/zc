
@{
    ViewBag.Title = "提现记录列表";
}
<style type="text/css">
    .mui-segmented-control{
        border:0px;
        border-bottom:1px solid #d7d7d7;
    }
    .mui-slider .mui-segmented-control .mui-control-item{
        background-color:#d7d7d7;
        color:#808080;
        border:0px;
    }
    .mui-slider .mui-segmented-control .mui-active{
        background-color:#fff;
        color:#808080;
    }
</style>
<header class="mui-bar mui-bar-nav">
    <!-- 防止history.back()回退到上一次查询金钻的页面 -->
    <a onclick="location.href = '@Url.Action("Center", "User")';" class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
    <h1 class="mui-title">提现记录</h1>
</header>
<div class="mui-content">
    <div id="slider" class="mui-slider">
        <div class="mui-segmented-control" id="segmented">
            <a class="mui-control-item mui-active" href="#item1mobile" onclick="LoadDataList(1)">
                已完成提现
            </a>
            <a class="mui-control-item" href="#item2mobile" onclick="LoadDataList(2)">
                待审核提现
            </a>
        </div>
    </div>
    <div class="mui-content-padded">
        <div id="item1mobile" class="mui-control-content mui-active">
            <h5 class="section-title">账户信息</h5>
            <table class="table table-bordered table-condensed">
                <thead>
                    <tr>
                        <th>金钻提现</th>
                        <th>银钻提现</th>
                        <th>累计提现</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>@ViewBag.CompleteGoldCash</td>
                        <td>@ViewBag.CompleteSilverCash</td>
                        <td>@ViewBag.SumCashMoney</td>
                    </tr>
                </tbody>
            </table>
            <h5 class="section-title">查询条件</h5>
            <form class="mui-input-group" id="searchForm">
                <div class="mui-input-row">
                    <label>起始日期</label>
                    <input name="beginTime" type="text" class="mui-input-clear datepicker" placeholder="起始日期">
                </div>
                <div class="mui-input-row">
                    <label>终止日期</label>
                    <input name="endTime" type="text" class="mui-input-clear datepicker" placeholder="终止日期">
                </div>
                <div class="mui-input-row">
                    <label>选择类型</label>
                    <select id="cash_type" name="cash_type" class="mui-input-clear" style="font-size:14px">
                        <option value="">全部</option>
                        <option value="1">金钻提现</option>
                        <option value="2">银钻提现</option>
                    </select>
                </div>
                <input type="hidden" value="5" name="cash_status" />
                <button type="button" class="btn btn-block btn-success" onclick="LoadDataList(1)" >查询</button>
            </form>
            <h5 class="section-title">查询结果</h5>
            <table class="table table-bordered table-condensed">
                <thead>
                    <tr>
                        <th>类型</th>
                        <th>金额</th>
                        <th>日期</th>
                    </tr>
                </thead>
                <tbody id="goldData">

                </tbody>
                </table>
        </div>
            <div id="item2mobile" class="mui-control-content">
                <form id="silverForm">
                    <input type="hidden" value="0" name="cash_status" />
                </form>
                <table class="table table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th>类型</th>
                            <th>金额</th>
                            <th>日期</th>
                        </tr>
                    </thead>
                    <tbody id="silverData"></tbody>
                </table>
            </div>
        </div>
</div>
@section bottomScript{

    <script type="text/javascript">
        var datePicker = new mui.DtPicker({
            type: 'date'
        });
        $('.datepicker').click(function () {
            var $this = this;
            datePicker.show(function (rs) {
                $this.value = rs.text;
            });
        });

        $('#acc_record_type > option').each(function (i, e) {
            if (e.value == $('#acc_record_type').attr('value')) {
                e.selected = "selected";
            }
        });
    </script>
}

<script type="text/javascript">
    $(function () { 
        LoadDataList(1);

    });

    function LoadDataList(cashType) {
        var seachCondition = $("#searchForm").serializeArray();;
        if (cashType != 1) {
            seachCondition = $("#silverForm").serializeArray();
        }
        $.ajax({
            url: "@Url.Action("SelectCashRecordList", "User")",
            type: "POST",
            data: seachCondition,
            success: function (data) {
                $("#silverData").html("");
                $("#goldData").html("");
                if (data.total == 0) {
                    return;
                }
                //如果有数据
                var list = data.rows;
                var strHtml = "";
                for (var i = 0; i < list.length; i++) {
                    var prop = list[i];
                    strHtml += "<tr>";
                    strHtml += " <td>" + prop.cash_type + "</td>";
                    strHtml += " <td>" + prop.cash_money + "</td>";
                    strHtml += " <td>" + prop.cash_time1 + "</td>";
                    strHtml += "</tr>";
                }
                if (cashType != 1) {
                    $("#silverData").html(strHtml);
                } else {
                    $("#goldData").html(strHtml);
                }
            }
        });

    }

</script>